var Grid=function(r,e){this.scores=scores,this.noGrids=r,this.cellArray=[],this.gameRunning=!1};Grid.prototype.init=function(){var r=this;this.render(),this.gameRunning=!0,setTimeout(function(){r.randomValue(),r.randomValue()},0)},Grid.prototype.reset=function(){for(var r=0;r<this.cellArray.length;r++)this.cellArray[r].setCellValue(0),this.cellArray[r].oldValue=0,this.cellArray[r].hasMoved=!1;this.gameRunning=!0,this.randomValue(),this.randomValue()},Grid.prototype.render=function(){for(var r=this,e=document.getElementById("grids"),t=0;t<r.noGrids;t++){var l=document.createElement("div");l.className="grid-row",e.appendChild(l);for(var o=0;o<r.noGrids;o++){var i=document.createElement("div");i.className="grid-cell",l.appendChild(i),r.cellArray.push(new Cells(t,r.noGrids,i))}}},Grid.prototype.randomValue=function(){var r=this,e=Math.random()<.5?2:4,t=Math.floor(Math.random()*this.noGrids*this.noGrids);r.gridIsFull()||(0===r.cellArray[t].value?(console.log("passed: "+t),r.cellArray[t].setCellValue(e)):(console.log("recursion"),r.randomValue()))},Grid.prototype.closeGapCells=function(r){for(var e=0;e<r.length;e++){var t=e+1;if(0===r[e]){for(;0===r[t]&&t<r.length;)t++;if(t===r.length)break;r[e]=r[t],r[t]=0}}},Grid.prototype.mergeCells=function(r){for(var e=this,t=0;t<r.length-1;t++){var l=t+1;r[t]===r[t+1]&&(r[t]*=2,r[l]=0,e.scores.addScore(r[t]))}},Grid.prototype.moveCells=function(r){var e=this;this.closeGapCells(r),this.mergeCells(r),this.closeGapCells(r)},Grid.prototype.cellHasMoved=function(){for(var r=this,e=[],t=0;16>t;t++){var l=this.cellArray[t].setHasMoved();e.push(l)}return e.indexOf(!0)>-1?!0:!1},Grid.prototype.checkGameOver=function(){return!this.movable()&&this.gridIsFull()?!0:!1},Grid.prototype.movable=function(){for(var r=this,e=0;12>e;e++)if(r.cellArray[e].value===r.cellArray[e+4].value)return!0;for(var t=0;4>t;t++)for(var l=0;3>l;l++)if(r.cellArray[4*t+l].value===r.cellArray[4*t+l+1].value)return!0;return!1},Grid.prototype.gridIsFull=function(){for(var r=this,e=0;16>e;e++)if(0===r.cellArray[e].value)return!1;return!0},Grid.prototype.checkGameWon=function(){for(var r=this,e=0;e<r.cellArray.length;e++)if(2048===r.cellArray[e].value)return!0;return!1},Grid.prototype.resetGame=function(){this.reset(),this.scores.reset()},Grid.prototype.console=function(){console.log(self.cellArray[0])};